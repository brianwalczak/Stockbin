<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Settings | Stockbin</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">
	
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
</head>
<body class="bg-gray-100">
    <%- include('snippets/header') %>

	<section class="main">
		<div class="mx-4 my-4 max-w-md mx-auto">
			<h2 class="text-xl font-semibold">Settings</h2>
		</div>
	
		<div class="mx-4 max-w-md mx-auto">
			<div class="section-container">
				<div class="text-lg section-header">Account</div>
				<div class="section-content">
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                	<input name="email" style="width: 100%; color: grey;" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Email Address" value="<%= user %>" disabled><br><br>

					<label for="timezone" class="block text-sm font-medium text-gray-700 mb-1">Time Zone</label>
					<select name="timezone" id="timezone" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-black">
						<% if(!data.timezone) { %>
							<option value="" selected disabled>Unselected</option>
						<% } %>

						<% Intl.supportedValuesOf("timeZone").map(zone => { %>
							<option value="<%= zone %>" <%= zone === data.timezone ? 'selected' : '' %>><%= zone %></option>
						<% }) %>
					</select>

					<a href="/logout" class="btn-red font-bold">Log Out</a>
				</div>
			</div>

			<div class="section-container">
				<div class="text-lg section-header">Manage your Data</div>
				<div class="section-content">
					<a href="/api/export" target="_blank" class="btn-red font-bold" style="margin-top: 5px;">Export as JSON</a>
					<button type="button" onclick="deleteAccount()" class="btn-red font-bold">Delete Account</button>
				</div>
			</div>

			<div class="section-container">
				<div class="text-lg section-header">About Stockbin</div>
				<div class="section-content">
					<p class="text-sm text-gray-600">Stockbin v<%= version %></p>
					<a href="https://github.com/brianwalczak/Stockbin" target="_blank" class="text-indigo-600 text-sm">View on GitHub</a>
				</div>
			</div>
		</div>
	</section>

    <%- include('snippets/footer') %>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="/js/settings.js"></script>
</body>
</html>
